# ðŸš€ VPS Deployment Instructions

## Quick Start Guide

### Step 1: Upload Files to VPS
```bash
# Using SCP or SFTP, upload all files to your VPS
# Or clone from git repository if you have one
```

### Step 2: Install MongoDB

**Option A - MongoDB Atlas (Cloud, Recommended for Beginners):**
1. Go to https://www.mongodb.com/cloud/atlas
2. Create free account and cluster
3. Get connection string
4. Your MONGO_URI will look like:
   ```
   mongodb+srv://username:password@cluster0.xxxxx.mongodb.net/telegram_bots
   ```

**Option B - Install on VPS (Ubuntu/Debian):**
```bash
# Update system
sudo apt update && sudo apt upgrade -y

# Install MongoDB
sudo apt install -y mongodb

# Start MongoDB
sudo systemctl start mongodb
sudo systemctl enable mongodb

# Your MONGO_URI will be:
# mongodb://localhost:27017/telegram_bots
```

**Option C - Docker:**
```bash
docker run -d -p 27017:27017 --name mongodb mongo:latest
# URI: mongodb://localhost:27017/telegram_bots
```

### Step 3: Install Python Dependencies
```bash
# Install Python 3.11+ if not installed
sudo apt install python3 python3-pip -y

# Install bot dependencies
pip3 install -r requirements.txt
```

### Step 4: Configure Environment
```bash
# Copy example env file
cp .env.example .env

# Edit with your values
nano .env
```

Update these values in `.env`:
```env
MONGO_URI=your_mongodb_uri_here
API_ID=your_api_id
API_HASH=your_api_hash
```

Bot tokens and channel IDs are already set correctly!

### Step 5: Run the Bots

**Test Run:**
```bash
python3 main.py
```

**Production Run (Choose One):**

**Method 1 - Screen (Simple):**
```bash
screen -S telegram_bots
python3 main.py
# Press Ctrl+A then D to detach
# To reattach: screen -r telegram_bots
```

**Method 2 - PM2 (Recommended):**
```bash
sudo npm install -g pm2
pm2 start main.py --name telegram_bots --interpreter python3
pm2 save
pm2 startup  # Run the command it outputs
pm2 logs telegram_bots  # View logs
```

**Method 3 - Systemd (Best for Production):**
```bash
# Create service file
sudo nano /etc/systemd/system/telegram-bots.service
```

Paste this (update paths):
```ini
[Unit]
Description=Telegram Multi-Bot Service
After=network.target

[Service]
Type=simple
User=YOUR_USERNAME
WorkingDirectory=/path/to/bot/directory
ExecStart=/usr/bin/python3 /path/to/bot/directory/main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

Enable and start:
```bash
sudo systemctl daemon-reload
sudo systemctl enable telegram-bots
sudo systemctl start telegram-bots
sudo systemctl status telegram-bots
```

## Important Checklist

Before running, make sure:

- [ ] MongoDB is installed and running
- [ ] Bot tokens are valid (test with @BotFather)
- [ ] API_ID and API_HASH are correct (from https://my.telegram.org)
- [ ] Bot is admin in **Saved Channel** (-1003133705295)
- [ ] Bot is admin in **Main Channel** (-1003132582396)
- [ ] Bot is admin in **Logger Channel** (-1003183652455)
- [ ] Bot is admin in **all required force subscribe channels**
- [ ] All 3 bot tokens are working

## Bot Admin Permissions Required

In each channel, bot needs these permissions:
- âœ… Post Messages
- âœ… Edit Messages (for main channel)
- âœ… Delete Messages
- âœ… Add Users (for force subscribe channels)

## Testing

1. Start the bots
2. Send `/start` to any bot
3. Send `/admin` to access admin panel (from owner/sudo account)
4. Wait for scheduled post time (10:00 AM default) or manually trigger
5. Check if videos are posted to main channel
6. Click video link and verify force subscribe works
7. After joining channels, verify video is sent in DM

## Troubleshooting

**Bots not starting:**
- Check MongoDB connection
- Verify API_ID and API_HASH
- Check bot tokens are valid

**Videos not posting:**
- Ensure bot is admin in saved channel and main channel
- Check scheduler time is correct
- Verify saved channel has videos

**Force subscribe not working:**
- Bot must be admin in all required channels
- For private channels, use channel ID or invite link
- Check channel usernames are correct

## Adding More Bots

1. Get new bot token from @BotFather
2. Add to `.env`:
   ```env
   BOT_TOKEN_4=your_new_token
   ```
3. Update `config.py`:
   ```python
   BOT_TOKENS = [
       os.getenv("BOT_TOKEN_1", "..."),
       os.getenv("BOT_TOKEN_2", "..."),
       os.getenv("BOT_TOKEN_3", "..."),
       os.getenv("BOT_TOKEN_4", "..."),  # Add this
   ]
   
   BOT_REQUIRED_CHANNELS = {
       1: [...],
       2: [...],
       3: [...],
       4: ["channel1", "channel2", ...]  # Add this
   }
   ```
4. Restart bots

## Monitoring

View logs:
```bash
# If using PM2
pm2 logs telegram_bots

# If using systemd
sudo journalctl -u telegram-bots -f

# If using screen
screen -r telegram_bots
```

## Support

Check logger channel (-1003183652455) for bot activity logs.

All admin commands:
- `/admin` - Admin panel
- `/broadcast` - Send message to all users
- `/users` - View user count
- `/ban <user_id>` - Ban user
- `/unban <user_id>` - Unban user
- `/stats` - View statistics

## Success! ðŸŽ‰

Your multi-bot system is now running and will:
- Post 2 videos daily at scheduled time
- Handle user subscriptions automatically
- Track all statistics
- Log all activities

For issues, check the logger channel or bot logs.
