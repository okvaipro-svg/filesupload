# Telegram Multi-Bot System

## Project Overview
A sophisticated multi-bot Telegram system for channel growth and video content distribution. The system supports running 3+ bots simultaneously with automated daily video posting, force subscribe mechanism, and comprehensive admin controls.

## Key Features
- **Multi-Bot Architecture**: Run multiple bots (3 initially, expandable to 6-7) from single codebase
- **Automated Video Posting**: Daily scheduled posting of 2 videos from saved channel to main channel
- **Deep Linking System**: Videos are stored and accessed via unique bot DM links
- **Force Subscribe**: Users must join required channels before accessing video content
- **Admin Panel**: Button-based interface for channel management and bot settings
- **Broadcasting**: Gcast feature for mass messaging to all users
- **Statistics Tracking**: Comprehensive stats for users, videos, and bot performance
- **Logger Integration**: All bot activities logged to dedicated channel
- **MongoDB Persistence**: Robust database for users, videos, settings, and stats

## Project Structure
```
├── main.py                 # Main bot launcher (runs all bots)
├── config.py              # Configuration and environment variables
├── database.py            # MongoDB operations and models
├── helpers.py             # Utility functions and UI builders
├── plugins/
│   ├── start.py          # Start command and video access handler
│   ├── callbacks.py      # Callback query handlers for buttons
│   ├── admin.py          # Admin commands and panel
│   └── scheduler.py      # Daily posting scheduler
├── requirements.txt       # Python dependencies
├── .env.example          # Environment variables template
├── .gitignore           # Git ignore rules
└── SETUP_GUIDE.md       # Detailed VPS setup instructions
```

## Configuration

### Bot Tokens
- Bot 1: 7727808398:AAE2o8UtxsSYhYUTJWePOni0jXZWo4ipVew
- Bot 2: 8298170893:AAGEncRQjGsWzpulLn_27J7moxtSJ1K2avc
- Bot 3: 8406916310:AAFKNaFmeYholPCkA2dXiQgnfI8p6WvldKU

### Channel IDs
- Saved Channel (Videos Source): -1003133705295
- Main Channel (10K subs): -1003132582396
- Logger Channel: -1003183652455

### Access Control
- Owner ID: 7924074157
- Sudo ID: 5294360309

### Required Channels by Bot
**Bot 1:**
- DataTraceUpdates
- +tON4QbKGs5k4NjBl
- +pVVo-sk9GwA1YzJl
- +GotefTYEgXxkNjY1

**Bot 2:**
- +6OTUDuSqJTE2ZjU1
- +sZ_HvIX7pMFkOGY1
- +U3OS5wDPoqRjOTY1
- +GotefTYEgXxkNjY1

**Bot 3:**
- +63BtI7See3swNTk1
- +iedooNdK0JQ1YTA1
- AakashPosts
- +GotefTYEgXxkNjY1

## How It Works

### Video Flow
1. Scheduler fetches 2 random videos from saved channel daily (10:00 AM default)
2. Videos are stored in MongoDB with unique IDs
3. Bot posts deep links to main channel (format: `https://t.me/BotUsername?start=video_id`)
4. User clicks link → Bot checks force subscribe status
5. If not joined → Shows required channels with join buttons
6. User joins channels → Clicks verify
7. Bot sends video in DM and increments view count

### Admin Features
- **/admin** - Access admin panel
- **/broadcast** - Send message to all users (reply to message)
- **/users** - View total user count
- **/ban <user_id>** - Ban user from bot
- **/unban <user_id>** - Unban user
- Admin Panel UI with buttons for settings, stats, channel management

### User Commands
- **/start** - Start bot or access video via deep link
- **/help** - Show help information
- **/stats** - View bot statistics

## MongoDB Collections

### users
- user_id, username, bot_number, joined_date, is_banned

### videos
- video_id, file_id, file_unique_id, message_id, bot_number, posted_date, views

### settings
- bot_number, setting_name, channels, updated_at

### stats
- stat_type, value, last_updated

## Deployment Notes

### MongoDB Configuration
- **MongoDB Atlas URI**: Configured and ready
- **Database Name**: telegram_bots
- **Connection**: Will work on VPS (Replit SSL limitation prevents testing here)

### For VPS Deployment
1. MongoDB Atlas is already configured in code
2. Install Python dependencies: `pip install -r requirements.txt`
3. Run with: `python main.py`
4. For production: Use PM2, systemd, or screen for background running

### Important Requirements
- Bot must be admin in: saved channel, main channel, logger channel
- Bot must be admin in all required channels for force subscribe to work
- Need Telegram API_ID and API_HASH from https://my.telegram.org
- MongoDB URI required for database connection

## Recent Changes
- Created multi-bot system with MongoDB persistence
- Implemented deep linking for video distribution
- Added force subscribe mechanism with channel verification
- Built comprehensive admin panel with button-based UI
- Integrated daily automated posting scheduler
- Added broadcast and statistics features
- Implemented logger for activity tracking

## User Preferences
- Hindi language support for user communication
- Non-spammy button-based interface
- Admin panel for easy management
- Expandable bot system (easily add more bots)
- VPS-ready deployment code structure
